import React, { Fragment, useContext } from 'react';
import { Popover, Transition } from '@headlessui/react';
import { NavLink as RouterLink } from 'react-router-dom';
import { MenuIcon, XIcon } from '@heroicons/react/outline';
import { useConnect } from '@stacks/connect-react';
import { AppContext } from '@common/context';


interface HeaderProps {
  signOut: () => void;
}

export const Header: React.FC<HeaderProps> = ({ signOut }) => {
  const [state, _] = useContext(AppContext);
  const { doOpenAuth } = useConnect();

  return (
    <Popover className="relative bg-black shadow-lg shadow-purple/20">
      <div className="px-4 mx-auto sm:px-6">
        <div className="flex items-center justify-between py-6 md:justify-start md:space-x-10">
          <div className="flex justify-start lg:w-0 lg:flex-1">
            <RouterLink to="/">
              <span className="sr-only">Arkadroids</span>
              <svg className="w-auto h-8 text-white sm:h-10" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 147 23">
                <path fill="currentColor" d="M9.063.625h3.765c.052.219 1.276 4.292 3.672 12.219h.672v7.36h-1.547v.577h1.547v1.578h-4.156v-4.53H7.922v1.921H5.859V23H2.08v-.219h.296V19.75h1.547v-6.266h1.281L9.063.625Zm1.765 6.297v.047c-.323 1.77-.948 4.573-1.875 8.406h3.5v-2.531h-.297c-.833-3.625-1.25-5.6-1.25-5.922h-.078Zm-6.672 5.437H4.5c0 .094.047.172.14.235a.32.32 0 0 1 .157-.235h.266v.032c-.178.25-.266.39-.266.421.042.094.14.245.297.454v.078h-.14c-.147 0-.25-.104-.313-.313-.157.209-.245.313-.266.313h-.188c-.052 0-.078-.026-.078-.078.032 0 .136-.141.313-.422v-.063c-.177-.26-.266-.4-.266-.422Zm-3.172.454h2.938v.671H.984v-.671Zm16.297.484h.797v.187l-.484.61h.453c.041.01.062.036.062.078v.078c0 .052-.02.078-.062.078h-.797v-.187l.484-.61h-.453v-.234Zm-5.765.984h.218v.375l.422-.375h.219v.047l-.328.375c.25.354.375.552.375.594h-.235c-.02 0-.135-.136-.343-.406-.031 0-.068.036-.11.109v.297h-.218V14.28Zm5.843.344h.453c.23.031.344.146.344.344l-.11.187c.074.084.11.235.11.453v.032h-.234c-.021-.25-.057-.375-.11-.375h-.265v.375h-.188c-.052 0-.078-.026-.078-.079v-.859c.01-.052.037-.078.078-.078Zm.188.219v.234h.265c.053 0 .079-.026.079-.078v-.156h-.344Zm-.266 1.094H18c.052.01.078.036.078.078v.078c0 .052-.026.078-.078.078h-.219v.797h-.265v-.797h-.235c-.052 0-.078-.026-.078-.078v-.078c.01-.052.037-.078.078-.078Zm-.078 1.328h.188c.073 0 .15.213.234.64h.031c.125-.375.188-.588.188-.64h.265c-.198.677-.323 1.015-.375 1.015h-.218l-.313-1.015Zm-8.14.859v.203c0 .042-.204.125-.61.25v.047l.61.219v.234l-.954-.344v-.265l.954-.344Zm-5.86.453h.125c.083 0 .219.344.406 1.031h-.218c0-.02-.026-.099-.079-.234h-.343c-.021.156-.058.234-.11.234h-.187c.219-.687.354-1.03.406-1.03Zm14.5 0h.11c.25 0 .4.177.453.531-.073.354-.235.532-.485.532-.354-.063-.531-.24-.531-.532.052-.354.203-.53.453-.53Zm-.187.5v.031c0 .136.062.24.187.313h.11a.344.344 0 0 0 .187-.313v-.03c-.02-.199-.11-.298-.266-.298-.146.052-.218.151-.218.297ZM3.25 18.922a3.479 3.479 0 0 0-.078.265h.187l-.078-.265H3.25Zm9.766 3.703h5.03V23h-5.03v-.375Z"/>
                <path fill="currentColor" d="M18.219.656h7.656c2.563 0 4.219.901 4.969 2.703.323.927.484 1.99.484 3.188v.937c0 2.167-.474 3.818-1.422 4.954h-1.625v.828h2.485v5.343h-1.47v.828h2.22v3.157h-4.657v-5.047h-1.797V14.28h-3.125v5.531h.672V23h-4.312c-.052 0-.078-.026-.078-.078v-8.969h1.922v-.64h-1.922V.655Zm4.39 3.64v6.313h1.063c1.594 0 2.515-.15 2.765-.453.26-.166.464-.505.61-1.015h1.656v-.797h-1.5v.078c-.083.479-.146.719-.187.719h-2.141v-.797h2.25c.052 0 .078-.021.078-.063.021-.646.031-1.01.031-1.094 0-1.395-.24-2.25-.718-2.562-.375-.219-1.063-.328-2.063-.328H22.61ZM32.094.75h4.375v4.188c0 1.395-.026 2.9-.078 4.515V9.5h.047c.354-.688 1.338-2.448 2.953-5.281.823-1.438 1.234-2.521 1.234-3.25V.75h4.484v.11c0 1.426-.583 2.984-1.75 4.671l-2.656 3.86 2.61 5.562h2.359v.672h-2.656v.047c.427.916.703 1.463.828 1.64h.484v2.016H45v3.64c-.76.022-1.323.032-1.688.032h-1.078c-.385 0-.911-.01-1.578-.031V20.53h-.968v-3.218h-.563l-.594-1.688h4.453v-.672h-4.078c0-.052-.24-.797-.718-2.234h-.032c-.25.469-.75 1.213-1.5 2.234h1.875v.672H36.47v1.094h-.266v5.078h.266v1.125c0 .052-.026.078-.078.078h-4.22c-.051 0-.077-.026-.077-.078v-1.75h1.984v-.75h-1.984V.75Zm1.797 14.203v.672h2.547c0-.083.062-.307.187-.672h-2.734Z"/>
                <path fill="currentColor" d="M53.39.656h3.766c.052.219 1.271 4.287 3.657 12.203h.687v7.36h-1.547v.562H61.5v1.578h-4.156v-4.515h-5.078v1.922h-2.078V23h-3.766v-.219h.297v-3.015h1.547V13.5h1.28L53.392.656Zm1.766 6.297v.031c-.323 1.782-.948 4.584-1.875 8.407h3.5v-2.532h-.297c-.833-3.614-1.25-5.583-1.25-5.906h-.078Zm-9.828 5.875h2.938v.672h-2.938v-.672Zm12.016 9.797h5.015V23h-5.015v-.375Z"/>
                <path fill="currentColor" d="M62.813.656h6.812c2.833 0 4.781.964 5.844 2.89.916 1.5 1.375 3.99 1.375 7.47h.672v5.343H70.89v-.609h2.078v-4.734h-.61V9.062c0-2.197-.49-3.598-1.468-4.203-.573-.323-1.495-.484-2.766-.484h-.922v6.531h.625v5.453H63.36v-5.047h-.547V.656ZM60.828 16.36h2.016v.703h4.984v1.47h3.063v-1.47h6.625v1.47h-4.547v3.984h-5.14V23H62.89c-.052 0-.078-.026-.078-.078v-5.86h-1.985v-.703Zm7 0h3.063v.703h-3.063v-.703Zm9.688 0h4.39v.703h-4.39v-.703Z"/>
                <path fill="currentColor" d="M77.969.656h7.656c2.563 0 4.219.901 4.969 2.703.323.927.484 1.99.484 3.188v.937c0 2.167-.474 3.818-1.422 4.954h-1.625v.828h2.485v5.343h-1.47v.828h2.22v3.157h-4.657v-5.047h-1.796V14.28h-3.126v5.531h.672V23h-4.312c-.052 0-.078-.026-.078-.078v-8.969h1.922v-.64h-1.922V.655Zm4.39 3.64v6.313h1.063c1.594 0 2.516-.15 2.766-.453.26-.166.463-.505.609-1.015h1.656v-.797h-1.5v.078c-.083.479-.146.719-.187.719h-2.141v-.797h2.25c.052 0 .078-.021.078-.063.021-.646.031-1.01.031-1.094 0-1.395-.24-2.25-.718-2.562-.375-.219-1.063-.328-2.063-.328H82.36Z"/>
                <path fill="currentColor" d="M100.438.64c3.208 0 5.317 1.12 6.328 3.36.573 1.094.859 3.203.859 6.328v.11h-1.656v.75h1.656v8.078h-1.094v2.906h-2.172V23h-7.593v-.828h-.922v-2.906H93.89v-2.282h1.156v-1.203H93.89v1.203h-2.766v-1.203h2.094a389.038 389.038 0 0 1-.031-4.187V9.688c0-3.542.599-5.912 1.796-7.11 1.094-1.292 2.912-1.937 5.454-1.937Zm-2.735 7.704h.047l-.047.062v2.031h-1.672v.75h1.672c-.02 3.22-.031 5.646-.031 7.282v.797h3.734V18.03h1.719v-.047c0-1.52-.01-3.64-.031-6.359 0-.115.01-.401.031-.86 0-2.937-.172-4.744-.516-5.421-.354-.646-1.005-.969-1.953-.969h-.547c-1.135 0-1.838.5-2.109 1.5-.125.49-.224 1.313-.297 2.469Zm9.922 2.094h2.687v.75h-2.687v-.75Z"/>
                <path fill="currentColor" d="M110.594.61h4.218c.042.01.063.036.063.078v10.874c0 .053-.021.079-.063.079h-.5v11.28c0 .053-.026.079-.078.079h-3.64c-.052 0-.078-.026-.078-.078V11.375h-1.125c-.052 0-.079-.026-.079-.078v-.485c.011-.052.037-.078.079-.078h1.125V.688c.01-.053.036-.079.078-.079Zm-.047 10.124v.641h2.156v-.64h-2.156ZM116.656.656h6.813c2.833 0 4.781.964 5.843 2.89.917 1.5 1.376 3.99 1.376 7.47h.671v5.343h-6.625v-.609h2.078v-4.734h-.609V9.062c0-2.197-.489-3.598-1.469-4.203-.573-.323-1.494-.484-2.765-.484h-.922v6.531h.625v5.453h-4.469v-5.047h-.547V.656Zm-1.984 15.703h2.016v.703h4.984v1.47h3.062v-1.47h6.625v1.47h-4.547v3.984h-5.14V23h-4.938c-.052 0-.078-.026-.078-.078v-5.86h-1.984v-.703Zm7 0h3.062v.703h-3.062v-.703Zm9.687 0h4.391v.703h-4.391v-.703Z"/>
                <path fill="currentColor" d="M139.422.672c2.479 0 4.14.797 4.984 2.39.584 1.209.875 2.391.875 3.547h-.031c-1.698.146-2.859.22-3.484.22 0-.824-.256-1.516-.766-2.079-.479-.27-.922-.406-1.328-.406h-.625c-1.063 0-1.708.411-1.938 1.234-.052.24-.078.427-.078.563v.328c0 1.166.615 2.01 1.844 2.531.104.094.958.484 2.563 1.172.854.396 1.645.885 2.374 1.469v.03h-3.921v.438h5.171v.625h.657v6.782h-1.281V23H134.5v-3.484h-2.344v-2.344h1.328v-.813h-1.328v-.547h4.547v3.704h4.656v-5.578h-3.484v-1.829h-4.328v-.437h2.094v-.031c-1.834-1.22-2.75-2.943-2.75-5.172v-.297c0-1.865.573-3.281 1.718-4.25 1.042-.833 2.646-1.25 4.813-1.25Zm5.64 11h1.579v.437h-1.579v-.437Zm-14.406 4.687h1.5v.813h-1.5v-.813Z"/>
              </svg>
            </RouterLink>
          </div>
          <div className="-my-2 -mr-2 md:hidden">
            <Popover.Button className="inline-flex items-center justify-center p-2 bg-white rounded-md text-almost-black hover:text-almost-black hover:bg-almost-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-purple">
              <span className="sr-only">Open menu</span>
              <MenuIcon className="w-6 h-6" aria-hidden="true" />
            </Popover.Button>
          </div>

          <div className="items-center justify-end hidden md:flex md:flex-1 lg:w-0">
            {state.userData ? (
              <button
                type="button"
                onClick={() => signOut()}
                className="inline-flex items-center justify-center px-4 py-2 text-base font-medium text-white bg-transparent border border-transparent rounded-md shadow-sm whitespace-nowrap hover:bg-transparent"
              >
                Sign out
              </button>
            ) : (
              <button
                type="button"
                onClick={() => doOpenAuth()}
                className="inline-flex items-center justify-center px-4 py-2 text-base font-medium text-white border border-transparent rounded-md shadow-sm shadow-purple/50 bg-purple/20 whitespace-nowrap hover:bg-purple/40"
              >
                Connect wallet
              </button>
            )}
          </div>
        </div>
      </div>

      <Transition
        as={Fragment}
        enter="duration-200 ease-out"
        enterFrom="opacity-0 scale-95"
        enterTo="opacity-100 scale-100"
        leave="duration-100 ease-in"
        leaveFrom="opacity-100 scale-100"
        leaveTo="opacity-0 scale-95"
      >
        <Popover.Panel focus className="absolute inset-x-0 top-0 p-2 transition origin-top-right transform md:hidden">
          <div className="divide-y-2 rounded-lg shadow-lg bg-almost-black ring-1 ring-black ring-opacity-5 divide-gray-card">
            <div className="px-5 pt-5 pb-6">
              <div className="flex items-center justify-between">
                <div>
                  <svg className="w-auto h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 147 23">
                    <path fill="currentColor" d="M9.063.625h3.765c.052.219 1.276 4.292 3.672 12.219h.672v7.36h-1.547v.577h1.547v1.578h-4.156v-4.53H7.922v1.921H5.859V23H2.08v-.219h.296V19.75h1.547v-6.266h1.281L9.063.625Zm1.765 6.297v.047c-.323 1.77-.948 4.573-1.875 8.406h3.5v-2.531h-.297c-.833-3.625-1.25-5.6-1.25-5.922h-.078Zm-6.672 5.437H4.5c0 .094.047.172.14.235a.32.32 0 0 1 .157-.235h.266v.032c-.178.25-.266.39-.266.421.042.094.14.245.297.454v.078h-.14c-.147 0-.25-.104-.313-.313-.157.209-.245.313-.266.313h-.188c-.052 0-.078-.026-.078-.078.032 0 .136-.141.313-.422v-.063c-.177-.26-.266-.4-.266-.422Zm-3.172.454h2.938v.671H.984v-.671Zm16.297.484h.797v.187l-.484.61h.453c.041.01.062.036.062.078v.078c0 .052-.02.078-.062.078h-.797v-.187l.484-.61h-.453v-.234Zm-5.765.984h.218v.375l.422-.375h.219v.047l-.328.375c.25.354.375.552.375.594h-.235c-.02 0-.135-.136-.343-.406-.031 0-.068.036-.11.109v.297h-.218V14.28Zm5.843.344h.453c.23.031.344.146.344.344l-.11.187c.074.084.11.235.11.453v.032h-.234c-.021-.25-.057-.375-.11-.375h-.265v.375h-.188c-.052 0-.078-.026-.078-.079v-.859c.01-.052.037-.078.078-.078Zm.188.219v.234h.265c.053 0 .079-.026.079-.078v-.156h-.344Zm-.266 1.094H18c.052.01.078.036.078.078v.078c0 .052-.026.078-.078.078h-.219v.797h-.265v-.797h-.235c-.052 0-.078-.026-.078-.078v-.078c.01-.052.037-.078.078-.078Zm-.078 1.328h.188c.073 0 .15.213.234.64h.031c.125-.375.188-.588.188-.64h.265c-.198.677-.323 1.015-.375 1.015h-.218l-.313-1.015Zm-8.14.859v.203c0 .042-.204.125-.61.25v.047l.61.219v.234l-.954-.344v-.265l.954-.344Zm-5.86.453h.125c.083 0 .219.344.406 1.031h-.218c0-.02-.026-.099-.079-.234h-.343c-.021.156-.058.234-.11.234h-.187c.219-.687.354-1.03.406-1.03Zm14.5 0h.11c.25 0 .4.177.453.531-.073.354-.235.532-.485.532-.354-.063-.531-.24-.531-.532.052-.354.203-.53.453-.53Zm-.187.5v.031c0 .136.062.24.187.313h.11a.344.344 0 0 0 .187-.313v-.03c-.02-.199-.11-.298-.266-.298-.146.052-.218.151-.218.297ZM3.25 18.922a3.479 3.479 0 0 0-.078.265h.187l-.078-.265H3.25Zm9.766 3.703h5.03V23h-5.03v-.375Z"/>
                    <path fill="currentColor" d="M18.219.656h7.656c2.563 0 4.219.901 4.969 2.703.323.927.484 1.99.484 3.188v.937c0 2.167-.474 3.818-1.422 4.954h-1.625v.828h2.485v5.343h-1.47v.828h2.22v3.157h-4.657v-5.047h-1.797V14.28h-3.125v5.531h.672V23h-4.312c-.052 0-.078-.026-.078-.078v-8.969h1.922v-.64h-1.922V.655Zm4.39 3.64v6.313h1.063c1.594 0 2.515-.15 2.765-.453.26-.166.464-.505.61-1.015h1.656v-.797h-1.5v.078c-.083.479-.146.719-.187.719h-2.141v-.797h2.25c.052 0 .078-.021.078-.063.021-.646.031-1.01.031-1.094 0-1.395-.24-2.25-.718-2.562-.375-.219-1.063-.328-2.063-.328H22.61ZM32.094.75h4.375v4.188c0 1.395-.026 2.9-.078 4.515V9.5h.047c.354-.688 1.338-2.448 2.953-5.281.823-1.438 1.234-2.521 1.234-3.25V.75h4.484v.11c0 1.426-.583 2.984-1.75 4.671l-2.656 3.86 2.61 5.562h2.359v.672h-2.656v.047c.427.916.703 1.463.828 1.64h.484v2.016H45v3.64c-.76.022-1.323.032-1.688.032h-1.078c-.385 0-.911-.01-1.578-.031V20.53h-.968v-3.218h-.563l-.594-1.688h4.453v-.672h-4.078c0-.052-.24-.797-.718-2.234h-.032c-.25.469-.75 1.213-1.5 2.234h1.875v.672H36.47v1.094h-.266v5.078h.266v1.125c0 .052-.026.078-.078.078h-4.22c-.051 0-.077-.026-.077-.078v-1.75h1.984v-.75h-1.984V.75Zm1.797 14.203v.672h2.547c0-.083.062-.307.187-.672h-2.734Z"/>
                    <path fill="currentColor" d="M53.39.656h3.766c.052.219 1.271 4.287 3.657 12.203h.687v7.36h-1.547v.562H61.5v1.578h-4.156v-4.515h-5.078v1.922h-2.078V23h-3.766v-.219h.297v-3.015h1.547V13.5h1.28L53.392.656Zm1.766 6.297v.031c-.323 1.782-.948 4.584-1.875 8.407h3.5v-2.532h-.297c-.833-3.614-1.25-5.583-1.25-5.906h-.078Zm-9.828 5.875h2.938v.672h-2.938v-.672Zm12.016 9.797h5.015V23h-5.015v-.375Z"/>
                    <path fill="currentColor" d="M62.813.656h6.812c2.833 0 4.781.964 5.844 2.89.916 1.5 1.375 3.99 1.375 7.47h.672v5.343H70.89v-.609h2.078v-4.734h-.61V9.062c0-2.197-.49-3.598-1.468-4.203-.573-.323-1.495-.484-2.766-.484h-.922v6.531h.625v5.453H63.36v-5.047h-.547V.656ZM60.828 16.36h2.016v.703h4.984v1.47h3.063v-1.47h6.625v1.47h-4.547v3.984h-5.14V23H62.89c-.052 0-.078-.026-.078-.078v-5.86h-1.985v-.703Zm7 0h3.063v.703h-3.063v-.703Zm9.688 0h4.39v.703h-4.39v-.703Z"/>
                    <path fill="currentColor" d="M77.969.656h7.656c2.563 0 4.219.901 4.969 2.703.323.927.484 1.99.484 3.188v.937c0 2.167-.474 3.818-1.422 4.954h-1.625v.828h2.485v5.343h-1.47v.828h2.22v3.157h-4.657v-5.047h-1.796V14.28h-3.126v5.531h.672V23h-4.312c-.052 0-.078-.026-.078-.078v-8.969h1.922v-.64h-1.922V.655Zm4.39 3.64v6.313h1.063c1.594 0 2.516-.15 2.766-.453.26-.166.463-.505.609-1.015h1.656v-.797h-1.5v.078c-.083.479-.146.719-.187.719h-2.141v-.797h2.25c.052 0 .078-.021.078-.063.021-.646.031-1.01.031-1.094 0-1.395-.24-2.25-.718-2.562-.375-.219-1.063-.328-2.063-.328H82.36Z"/>
                    <path fill="currentColor" d="M100.438.64c3.208 0 5.317 1.12 6.328 3.36.573 1.094.859 3.203.859 6.328v.11h-1.656v.75h1.656v8.078h-1.094v2.906h-2.172V23h-7.593v-.828h-.922v-2.906H93.89v-2.282h1.156v-1.203H93.89v1.203h-2.766v-1.203h2.094a389.038 389.038 0 0 1-.031-4.187V9.688c0-3.542.599-5.912 1.796-7.11 1.094-1.292 2.912-1.937 5.454-1.937Zm-2.735 7.704h.047l-.047.062v2.031h-1.672v.75h1.672c-.02 3.22-.031 5.646-.031 7.282v.797h3.734V18.03h1.719v-.047c0-1.52-.01-3.64-.031-6.359 0-.115.01-.401.031-.86 0-2.937-.172-4.744-.516-5.421-.354-.646-1.005-.969-1.953-.969h-.547c-1.135 0-1.838.5-2.109 1.5-.125.49-.224 1.313-.297 2.469Zm9.922 2.094h2.687v.75h-2.687v-.75Z"/>
                    <path fill="currentColor" d="M110.594.61h4.218c.042.01.063.036.063.078v10.874c0 .053-.021.079-.063.079h-.5v11.28c0 .053-.026.079-.078.079h-3.64c-.052 0-.078-.026-.078-.078V11.375h-1.125c-.052 0-.079-.026-.079-.078v-.485c.011-.052.037-.078.079-.078h1.125V.688c.01-.053.036-.079.078-.079Zm-.047 10.124v.641h2.156v-.64h-2.156ZM116.656.656h6.813c2.833 0 4.781.964 5.843 2.89.917 1.5 1.376 3.99 1.376 7.47h.671v5.343h-6.625v-.609h2.078v-4.734h-.609V9.062c0-2.197-.489-3.598-1.469-4.203-.573-.323-1.494-.484-2.765-.484h-.922v6.531h.625v5.453h-4.469v-5.047h-.547V.656Zm-1.984 15.703h2.016v.703h4.984v1.47h3.062v-1.47h6.625v1.47h-4.547v3.984h-5.14V23h-4.938c-.052 0-.078-.026-.078-.078v-5.86h-1.984v-.703Zm7 0h3.062v.703h-3.062v-.703Zm9.687 0h4.391v.703h-4.391v-.703Z"/>
                    <path fill="currentColor" d="M139.422.672c2.479 0 4.14.797 4.984 2.39.584 1.209.875 2.391.875 3.547h-.031c-1.698.146-2.859.22-3.484.22 0-.824-.256-1.516-.766-2.079-.479-.27-.922-.406-1.328-.406h-.625c-1.063 0-1.708.411-1.938 1.234-.052.24-.078.427-.078.563v.328c0 1.166.615 2.01 1.844 2.531.104.094.958.484 2.563 1.172.854.396 1.645.885 2.374 1.469v.03h-3.921v.438h5.171v.625h.657v6.782h-1.281V23H134.5v-3.484h-2.344v-2.344h1.328v-.813h-1.328v-.547h4.547v3.704h4.656v-5.578h-3.484v-1.829h-4.328v-.437h2.094v-.031c-1.834-1.22-2.75-2.943-2.75-5.172v-.297c0-1.865.573-3.281 1.718-4.25 1.042-.833 2.646-1.25 4.813-1.25Zm5.64 11h1.579v.437h-1.579v-.437Zm-14.406 4.687h1.5v.813h-1.5v-.813Z"/>
                  </svg>
                </div>
                <div className="-mr-2">
                  <Popover.Button className="inline-flex items-center justify-center p-2 bg-white rounded-md text-almost-black hover:text-black focus:outline-none focus:ring-2 focus:ring-inset focus:ring-purple">
                    <span className="sr-only">Close menu</span>
                    <XIcon className="w-6 h-6" aria-hidden="true" />
                  </Popover.Button>
                </div>
              </div>
            </div>
            <div className="px-5 py-6 space-y-6">
              {state.userData ? (
                <button
                  type="button"
                  onClick={() => signOut()}
                  className="w-full px-4 py-2 text-base font-medium text-white bg-transparent border border-transparent rounded-md shadow-sm whitespace-nowrap hover:bg-transparent"
                >
                  Sign out
                </button>
              ) : (
                <button
                  type="button"
                  onClick={() => doOpenAuth()}
                  className="w-full px-4 py-2 text-base font-medium text-white border border-transparent rounded-md shadow-sm shadown-purple/50 bg-purple/20 whitespace-nowrap hover:bg-purple/40"
                >
                  Connect wallet
                </button>
              )}
            </div>
          </div>
        </Popover.Panel>
      </Transition>
    </Popover>
  )
}
